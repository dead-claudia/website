!function(){"use strict";var e,t=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,i={name:"A name is required, even if it's a pseudonym.",email:"An email address must be valid if given.",subject:'A subject is required. "No subject" is okay.',message:'A message is required. "See title" works.'},a={view:function(e,t,i){return m("label",[m("span",{"class":t.required?"required":""},i),m("input",t)])}};m.mount(document.getElementById("contact"),{controller:function(){this.locked=m.prop(!1),this.name=m.prop(""),this.email=m.prop(""),this.subject=m.prop(""),this.message=m.prop(""),this.errors=m.prop(),/[?&]w/.test(location.search)&&(this.subject("Website design request"),this.email("Don't forget to leave me a way to get back to you!")),this.onsubmit=function(a){if(a=a||event,a.preventDefault(),a.stopPropagation(),!this.locked()){var n=[];if(/^\s*$/.test(this.name())&&n.push(i.name),""===this.email()||t.test(this.email())||n.push(i.email),/^\s*$/.test(this.subject())&&n.push(i.subject),/^\s*$/.test(this.message())&&n.push(i.message),n.length)return void this.errors(n);this.errors(e),this.email()||this.name("(Anonymous) "+this.name()),m.request({method:"POST",url:"//formspree.io/me@isiahmeadows.com",config:function(e){e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},data:m.route.buildQueryString({name:this.name(),_subject:"[Personal Site] "+this.subject(),message:this.message(),email:this.email()||e})}).then(function(){location.href="./contact-finish.html"})}}},view:function(e){return m("form",{novalidate:"",onchange:function(t){e[t.target.name](t.target.value)},onsubmit:e.onsubmit.bind(e)},[m("div",[m("p",m("span.required")," = Required"),m(a,{name:"name",required:"required",autocomplete:"name"},"Name:"),m(a,{name:"email",type:"email",autocomplete:"email"},"Email:"),m(a,{name:"subject",required:"required",autocomplete:"off"},"Subject:"),m("label.msg",[m("span.required","Message"),m("textarea",{autocomplete:"off",required:"required",name:"message"})]),m("input[type=hidden]",{onchange:e.locked.bind(e,!0)}),e.errors()?m(".warning",[m("p",["Could you fix these problems for me before ","submitting this form?"]),m("ul",e.errors().map(function(e){return m("li",e)}))]):null,m(".submit",[m("input[type=submit][value=Send]")]),e.locked()?m(".warning",["Hidden field modified. Form locked. (If you are a ","human, you might want to be careful messing with the ","source code ",m("img.wink[src=wink.png][alt='winking face']"),". And while you are at it, you can always reload the ","page.)"]):null]),m("small",["Legal note: By submitting this form, you agree that it ","is not confidential, as I cannot guarantee any 100% ","safety or privacy through the Internet. Even end-to-end ","HTTPS through ",m("a[target=_blank][href=https://torproject.org]","Tor")," and a VPN can't legally guarantee you that.",m("img.wink[src=wink.png][alt='winking face']")])])}})}();