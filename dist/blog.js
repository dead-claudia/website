!function(){"use strict";function t(t){function e(){this.init.apply(this,arguments)}return e.prototype=t,{controller:e,view:function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return t.view.apply(t,e)}}}function e(t){return{view:function(){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return t.apply(null,e)}}}function n(t){return{href:t,config:m.route}}function r(t){return null!=t&&/^[\w ,\-]+$/.test(t)}function o(t){return null!=t?t.split(/\s*,\s*/g):[]}function i(t,e){return 1===e?t:/[aeiou]$/.test(t)?t+"es":t+"s"}function a(t){return t.replace(/&<"/g,function(t){return"&"===t?"&amp;":"<"===t?"&lt;":"&quot;"})}function s(){d={},y().forEach(function(t){t.tags.forEach(function(e){e=e.toLowerCase();var n=d[e]=d[e]||[];n.indexOf(t)<0&&n.push(t)})})}function u(t){if(null==d&&s(),!r(t))return[];var e=[],n={};return o(t.toLowerCase()).forEach(function(t){d[t]&&d[t].forEach(function(t){n[t.url]||(n[t.url]=!0,e.push(t))})}),e}m.deferred.onerror=function(){var t=m.deferred.onerror;return function(e){return"undefined"!=typeof console&&console.error&&console.error(e),t(e)}}();var l=e(function(t,e){return m(".blog-summary-item",[m(".post-date",t.date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),m("a.post-stub",n("/posts/"+t.url),[m(".post-title",t.title),m(".post-preview",t.preview,"...")]),m(".post-tags",m("span","Tags:"),t.tags.map(function(t){var r=e&&t===m.route.param("tag").toLowerCase();return m("a.post-tag"+(r?".post-tag-active":""),n("/tags/"+t),t)}))])}),c=t({init:function(){var t=m.route.param("tag");this.fail=m.prop(null!=t&&!r(t)),this.value=m.prop(null!=t?t:""),this.onsubmit=function(t){t=t||event,t.defaultPrevented||(13===(t.which||t.keyCode)||"Enter"===t.key)&&(t.preventDefault(),t.stopPropagation(),r(this.value())?m.route("/tags/"+encodeURIComponent(this.value())):this.fail(!0))}},view:function(){return m(".tag-search",[m("label","Search for tag:"),m("input[type=text]",{value:this.value(),oninput:m.withAttr("value",this.value),onkeydown:this.onsubmit.bind(this)}),this.fail()?m(".warning",["Tags may only be a comma-separated list of phrases."]):null])}}),f=e(function(){return m(".summary-header",[m(".summary-title","Posts, sorted by most recent."),m(c)])}),p=t({init:function(){var t=this.tag=m.route.param("tag");if(r(t)){var e=o(t);if(1===e.length)this.list="'"+e[0]+"'";else if(2===e.length)this.list="'"+e[0]+"' or '"+e[1]+"'";else{var n=e.pop();this.list=e.map(function(t){return"'"+t+"'"}).join(", ")+", or '"+n+"'"}}},view:function(t){return m(".summary-header",[m(".summary-title",[m(".tag-title",[r(this.tag)?["Posts tagged ",this.list," (",t," ",i("post",t),"):"]:["Invalid tag: '",this.tag,"'"]]),m("a.back",n("/"),["Back to posts ",m.trust("&#9658;")])]),m(c)])}}),h=e(function(t,e){return m(".blog-summary",[m("p",["My ramblings about everything (religion, politics, coding, ","etc.)"]),e?m(p,t.length):m(f),m(".blog-list",[t.map(function(t){return m(l,t,e)})])])}),g=new marked.Renderer;g.code=function(t,e){return'<pre><code class="hljs hljs-'+e+'">'+hljs.highlight(e,t).value+"</code></pre>"},g.image=function(t,e,n){var r=/\s=\s*(\d*)\s*x\s*(\d*)\s*$/.exec(t);r&&(t=t.slice(0,-r[0].length));var o='<img src="'+a(t)+'" alt="'+a(n);return r&&r[1]&&(o+='" height="'+r[1]),r&&r[2]&&(o+='" width="'+r[2]),o+'">'},marked.setOptions({sanitize:!0,renderer:g});var d,v=t({init:function(t){var e=this.content=m.prop();m.request({method:"GET",url:"./blog/"+t.url,deserialize:function(t){return t}}).then(function(t){e(marked(t))&&m.redraw()})},view:function(t){return m(".blog-post",[m("h3.post-title",t.title),m(".post-body",[null!=this.content()?m.trust(this.content()):m(".post-loading","Loading...")]),m("a.post-home",n("/"),"Home ",m.trust("&#9658;"))])}}),y=m.prop(),w={},b=!1;m.request({method:"GET",url:"./blog.json"}).then(function(t){var e=6e4*((new Date).getTimezoneOffset()-300);y(t.posts).forEach(function(t){t.date=new Date(Date.parse(t.date)+e),w[t.url]=t}),y().sort(function(t,e){return e.date-t.date}),b&&m.route(m.route())}),document.addEventListener("DOMContentLoaded",function(){function t(t){return e(function(){return y()?t():m(".blog-loading","Loading...")})}document.getElementById("info").innerHTML="<p>Loading...</p><p>If this text doesn't disappear within a few seconds, you may have to reload the page. The JavaScript is sometimes a little finicky loading. If that doesn't help (i.e. you see this message again after reloading), then <a href='contact.html'>please tell me</a>. As soon as I get the message, I'll try to get it fixed as soon as I can.</p><p>If you happen to use GitHub, you can also tell me <a href='https://github.com/isiahmeadows/website'>here</a>, and if you'd like, feel free to help me fix whatever it is.</p>",b=!0,m.route.mode="hash",m.route(document.getElementById("blog"),"/",{"/":t(function(){return m(h,y())}),"/posts/:post":t(function(){return m(v,w[m.route.param("post")])}),"/tags/:tag":t(function(){return m(h,u(m.route.param("tag")),!0)})})})}();