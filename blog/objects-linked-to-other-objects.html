<!DOCTYPE html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=google-site-verification content=uV7Lko0q31ot2kgRjnMeU4sN5Fx4Whld80ItNCYYkA4><meta name=theme-color content=#942a39><link rel=license href=https://github.com/isiahmeadows/website/blob/gh-pages/LICENSE><link rel=stylesheet href=/page.css><link rel=stylesheet href=/blog/index.css><link rel="shortcut icon" href=/favicon.ico><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Atom feed"><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="RSS feed"><title>Isiah Meadows - Blog - Objects linked to other objects - Simplifies so much</title><div id=content><div id=header><nav><div><a href=/ >Isiah Meadows</a></div><div><div class="link l1"><a href=/about/ >About</a></div><div class="link l2"><a href=/showcase/ >Showcase</a></div><div class="link l3"><a class=selected href=/blog/ >Blog</a></div><div class="link l4"><a href=/contact/ >Contact</a></div></div></nav></div><div id=content-body><div id=body-wrapper><div><h2 class=l3><a href=/blog/ >Blog</a></h2><div id=body><div id=blog><div class=blog-post><div class=blog-post-wrapper><a class=post-home href=/blog/ >Home ►</a><h3 class=post-title>Objects linked to other objects - Simplifies so much</h3><div class=post-body><p><em>Edit (2016-01-14): minor typography/style/bug/etc. fixes.</em></p>
<p>I recently made my first npm module (<a href=http://npm.im/babel-plugin-proto-to-create>babel-plugin-proto-to-create</a>), but this just stems from my general frustration with class-based OO. Not saying it&#39;s a terrible thing at all, or that I can&#39;t understand it at all, but there&#39;s nothing simpler than objects linked to other objects. Nothing more elegant than this:</p>
<pre><code class="hljs hljs-js"><span class=hljs-keyword>const</span> Vehicle = {
    <span class=hljs-keyword>new</span>(make, model) {
        <span class=hljs-keyword>return</span> {
            <span class=hljs-attr>__proto__</span>: <span class=hljs-keyword>this</span>,
            make, model,
        }
    },

    toString() {
        <span class=hljs-keyword>return</span> [
              <span class=hljs-string>"Type:  "</span> + <span class=hljs-keyword>this</span>.type,
              <span class=hljs-string>"Make:  "</span> + <span class=hljs-keyword>this</span>.make,
            <span class=hljs-string>"Model: "</span> + <span class=hljs-keyword>this</span>.model,
        ].join(<span class=hljs-string>"\n"</span>)
    },
}

<span class=hljs-keyword>const</span> Car = {
    <span class=hljs-attr>__proto__</span>: Vehicle,

    <span class=hljs-attr>type</span>: <span class=hljs-string>"Car"</span>,
}

<span class=hljs-keyword>const</span> Truck = {
    <span class=hljs-attr>__proto__</span>: Vehicle,

    <span class=hljs-attr>type</span>: <span class=hljs-string>"Truck"</span>,
}</code></pre>
<p>Merely creating an instance is as simple as this:</p>
<pre><code class="hljs hljs-js"><span class=hljs-keyword>let</span> car = Car.new(<span class=hljs-string>"Nissan"</span>, <span class=hljs-string>"Ultima"</span>)</code></pre>
<p>I really love the simplicity of this, pure prototypal OO. It&#39;s simple, concise, and beautiful. Or, if you&#39;d prefer, you could always use ES6 classes:</p>
<pre><code class="hljs hljs-js"><span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>Vehicle</span> </span>{
    <span class=hljs-keyword>constructor</span>(make, model) {
        <span class=hljs-keyword>this</span>.make = make
        <span class=hljs-keyword>this</span>.model = model
    }

    toString() {
        <span class=hljs-keyword>return</span> [
              <span class=hljs-string>"Type:  "</span> + <span class=hljs-keyword>this</span>.type,
              <span class=hljs-string>"Make:  "</span> + <span class=hljs-keyword>this</span>.make,
            <span class=hljs-string>"Model: "</span> + <span class=hljs-keyword>this</span>.model,
        ].join(<span class=hljs-string>"\n"</span>)
    }
}

<span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>Car</span> <span class=hljs-keyword>extends</span> <span class=hljs-title>Vehicle</span> </span>{
    <span class=hljs-keyword>constructor</span>(...args) {
        <span class=hljs-keyword>super</span>(...args)
        <span class=hljs-keyword>this</span>.type = <span class=hljs-string>"Car"</span>
    }
}


<span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>Truck</span> <span class=hljs-keyword>extends</span> <span class=hljs-title>Vehicle</span> </span>{
    <span class=hljs-keyword>constructor</span>(...args) {
        <span class=hljs-keyword>super</span>(...args)
        <span class=hljs-keyword>this</span>.type = <span class=hljs-string>"Truck"</span>
    }
}</code></pre>
<p>Lot more boilerplate. Extending mixins in ES6 classes are also a little more complicated:</p>
<pre><code class="hljs hljs-js"><span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>mixin</span>(<span class=hljs-params>Class, ...srcs</span>) </span>{
    <span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>C</span> <span class=hljs-keyword>extends</span> <span class=hljs-title>Class</span> </span>{}
    <span class=hljs-built_in>Object</span>.assign(C.prototype, ...srcs)
    <span class=hljs-keyword>return</span> C
}

<span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>Foo</span> <span class=hljs-keyword>extends</span> <span class=hljs-title>mixin</span>(<span class=hljs-title>Bar</span>, <span class=hljs-title>Baz</span>) </span>{}

<span class=hljs-comment>// Or, if you want to mixin classes...</span>

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>mixin</span>(<span class=hljs-params>Class, ...others</span>) </span>{
    <span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>C</span> <span class=hljs-keyword>extends</span> <span class=hljs-title>Class</span> </span>{}
    <span class=hljs-built_in>Object</span>.assign(C.prototype, ...others.map(<span class=hljs-function><span class=hljs-params>D</span> =&gt;</span> D.prototype))
    <span class=hljs-keyword>return</span> C
}

<span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>Foo</span> <span class=hljs-keyword>extends</span> <span class=hljs-title>mixin</span>(<span class=hljs-title>Bar</span>, <span class=hljs-title>Baz</span>) </span>{}</code></pre>
<p>Why do classes, even JS prototype-based classes, have to be so complicated?</p>
<pre><code class="hljs hljs-js"><span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>mixin</span>(<span class=hljs-params>Type, ...others</span>) </span>{
    <span class=hljs-keyword>return</span> <span class=hljs-built_in>Object</span>.assign({<span class=hljs-attr>__proto__</span>: Type}, ...others)
}

<span class=hljs-keyword>const</span> Foo = {
    <span class=hljs-attr>__proto__</span>: mixin(Bar, Baz),
}</code></pre>
<p>And with ES7&#39;s object spread operator, the mixin picture is only going to make this nicer:</p>
<pre><code class="hljs hljs-js"><span class=hljs-keyword>const</span> Type = {
    <span class=hljs-attr>__proto__</span>: Foo,
    ...Mixin1,
    ...Mixin2,

    method() {},
}</code></pre>
<p>Very lightweight mixins that don&#39;t need any syntactical support. Not to mention you could even define these is-a/has-a relationships conditionally at object creation time:</p>
<pre><code class="hljs hljs-js"><span class=hljs-keyword>const</span> Type = {
    <span class=hljs-keyword>new</span>(condition) {
        <span class=hljs-keyword>return</span> {
            <span class=hljs-attr>__proto__</span>: <span class=hljs-keyword>this</span>,
            ...(condition ? Mixin1 : Mixin2),
        }
    }
}</code></pre>
<p>I know of no other language with this kind of flexibility.</p>
</div><div class=post-footer><a class=post-home href=/blog/ >Home ►</a><div class=post-tags><span>Tags:</span><a class=post-tag data-tag=javascript href=/blog/#javascript>javascript</a><a class=post-tag data-tag=es6 href=/blog/#es6>es6</a><a class=post-tag data-tag="object oriented" href=/blog/#object%20oriented>object oriented</a><a class=post-tag data-tag=opinions href=/blog/#opinions>opinions</a></div></div></div></div></div></div></div></div><div id=license><div><footer><small><p>This site does use Google Analytics for basic tracking (IP addresses anonymized), and a few third parties collect a few cookies their own, like GitHub and some of the creators of the widgets in the <a href=/about/ >About</a>
page's widgets. If you don't consent to these, either stop using this site or just block them in some way, like with a firewall or with a blocker like
<a href=https://adblockplus.org/ >Adblock Plus</a>,
<a href=https://github.com/gorhill/uBlock>uBlock Origin</a>.
<p>All content available on this site by Isiah Meadows is licensed under the Creative Commons Attribution 4.0 International License, and all source code is licensed under the ISC License, unless otherwise specified.
<p><a href=https://github.com/isiahmeadows/website/blob/gh-pages/LICENSE target=_blank rel=license>See here for the text of both of these licenses.</a></small></footer></div></div></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=UA-38960675-5"></script><script>function gtag(){dataLayer.push(arguments)}dataLayer=[["js",new Date],["config","UA-38960675-5",{anonymize_ip:1}]];onerror=function(a,b,c,d){d=(b+" at line: "+c+(d?" column: "+d:"")).trim();c=document.createElement("a");c.href=b;dataLayer.push(["event",a,{event_label:d,event_category:c.hostname!=location.hostname&&c.hostname?"external error":"error",non_interaction:1}],["event","exception",{description:d+": "+a.trim()}])}</script>