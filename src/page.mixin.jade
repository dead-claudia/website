doctype html
meta(charset="utf-8")
meta(name="viewport" content="width=device-width,initial-scale=1")
meta(name="google-site-verification" content="uV7Lko0q31ot2kgRjnMeU4sN5Fx4Whld80ItNCYYkA4")
link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css")
link(rel="license" href="https://github.com/isiahmeadows/website/blob/gh-pages/LICENSE")
link(rel="stylesheet" href=resolve("page.css"))
link(rel="shortcut icon" href=resolve("favicon.ico"))

//- Set the function to a noop if we're running this locally.
script.
    if (location.hostname==="localhost")window.ga=function(){}

    ;(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga("create", "UA-38960675-5", "auto", {anonymizeIp: true, forceSSL: true});
    ga("send", "pageview");

mixin a(href)
    - var class_ = attributes.class || ""
    - var newTab = /[\s^]new[\s$]/.test(class_)
    - attributes.class = class_.replace(/[\s^]+new[\s$]+/g, "")
    a(href=href target=(!!newTab && "_blank"))&attributes(attributes)
        block

mixin page--link(name, file)
    a&attributes(navAttrs(name, file))
        block

//- page(title, file = FILE, name = title)
mixin page(name, file, title)
    - assert(name, "(mixin page) Page `name` required!")
    - title = title || name
    title Isiah Meadows - #{title}

    #content
        #header
            nav
                div
                    +a(resolve("index.html")) Isiah Meadows

                div
                    .link.l0: +page--link("about.html", file) About
                    .link.l1: +page--link("projects.html", file) Projects
                    .link.l2: +page--link("blog.html", file) Blog
                    .link.l3: +page--link("contact.html", file) Contact

        //- Hack for 2-column layout
        #content-body
            #body-wrapper: div
                case file != null ? file : FILE
                    when "index.html": h2.l0= name
                    when "about.html": h2.l1= name
                    when "projects.html": h2.l2= name
                    when "blog.html": h2.l3= name
                    when "contact.html": h2.l5= name
                    default: h2= name
                #body: block

            #license: div
                footer
                    small
                        p.
                            All content available on this site by Isiah Meadows is
                            licensed under the Creative Commons Attribution 4.0
                            International License, and all source code is licensed
                            under the ISC License, unless otherwise specified.
                        p: a(
                            href="https://github.com/isiahmeadows/website/blob/gh-pages/LICENSE"
                            target="_blank"
                            rel="license"
                        ) See here for the text of both of these licenses.
